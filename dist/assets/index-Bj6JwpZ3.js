var b=Object.defineProperty;var B=s=>{throw TypeError(s)};var v=(s,e,t)=>e in s?b(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var n=(s,e,t)=>v(s,typeof e!="symbol"?e+"":e,t),x=(s,e,t)=>e.has(s)||B("Cannot "+t);var i=(s,e,t)=>(x(s,e,"read from private field"),t?t.call(s):e.get(s)),m=(s,e,t)=>e.has(s)?B("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),a=(s,e,t,o)=>(x(s,e,"write to private field"),o?o.call(s,t):e.set(s,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const I of l.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&o(I)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function L(s){let e=s.length;for(;e!=0;){let t=Math.floor(Math.random()*e);e--,[s[e],s[t]]=[s[t],s[e]]}}var S,w,f,g,h,d;class T{constructor(e,t,o,r=!0,l=!1){m(this,S);m(this,w);m(this,f);m(this,g);m(this,h);m(this,d);a(this,S,t),a(this,w,e),a(this,f,o),a(this,g,r),a(this,h,l)}get col(){return i(this,S)}get row(){return i(this,w)}get open(){return i(this,h)}get free(){return i(this,g)}get color(){return i(this,f)}set element(e){a(this,d,e)}set free(e){a(this,g,e)}addEventClick(){i(this,d)&&i(this,d).addEventListener("click",e=>(i(this,h)||(i(this,d).style.backgroundColor=i(this,f),a(this,h,!0)),!1))}resetColor(){i(this,d).style.backgroundColor="rgb(41, 41, 41)",a(this,h,!1)}}S=new WeakMap,w=new WeakMap,f=new WeakMap,g=new WeakMap,h=new WeakMap,d=new WeakMap;class O{constructor(e="timer"){n(this,"min");n(this,"sec");n(this,"ms");n(this,"count");n(this,"malt");n(this,"salt");n(this,"msalt");n(this,"idElement");if(this.idElement=e,localStorage.getItem("finalTime")!==null){let t=JSON.parse(localStorage.getItem("finalTime"));this.min=parseInt(t.min),this.sec=parseInt(t.sec),this.ms=parseInt(t.ms),this.update(`${this.pad(this.min)}:${this.pad(this.sec)}:${this.pad(this.ms)}`)}else if(localStorage.getItem("timer")!==null){let t=JSON.parse(localStorage.getItem("timer"));this.sec=parseInt(t.sec),this.min=parseInt(t.min),this.ms=parseInt(t.ms)}else this.ms=0,this.min=0,this.sec=0}start(){localStorage.getItem("finalTime")===null&&(this.count=setInterval(()=>{if(this.ms==100)if(this.ms=0,this.sec==59)this.sec=0,this.min++;else{if(this.sec%2==0){let e={sec:this.sec,ms:this.ms,min:this.min};localStorage.setItem("timer",JSON.stringify(e))}this.sec++}else this.ms++;this.malt=this.pad(this.min),this.salt=this.pad(this.sec),this.msalt=this.pad(this.ms),this.update(this.malt+":"+this.salt+":"+this.msalt)},10))}stop(){clearInterval(this.count)}update(e){let t=document.getElementById(this.idElement);t.firstChild.nodeValue=e}pad(e){let t;return e<10?t="0"+e:t=e,t}getTime(){return{min:this.pad(this.min),sec:this.pad(this.sec),ms:this.pad(this.ms)}}}var p,u,C,c;class y{constructor(e,t,o="game"){m(this,p);m(this,u);m(this,C);m(this,c);n(this,"element");n(this,"timer");a(this,p,e),a(this,u,t),a(this,C,o),this.element=document.getElementById(o),a(this,c,[]),this.createBoxes(),this.paintBoxes(),this.element.addEventListener("click",()=>{this.checkOpenBoxes()}),this.initTimer()}get cols(){return i(this,u)}get rows(){return i(this,p)}checkOpenBoxes(){let e=i(this,c).filter(t=>t.open&&t.free);e.length==2?e[0].color===e[1].color?(e.map(t=>{t.free=!1}),this.arrayBoxesToLocalStorage()):setTimeout(()=>{e.map(t=>{t.resetColor()})},500):this.arrayBoxesToLocalStorage(),this.checkFinishGame()}checkFinishGame(){i(this,c).filter(t=>t.free).length===0&&setTimeout(()=>{this.timer.stop(),localStorage.setItem("finalTime",JSON.stringify(this.timer.getTime())),alert("YOU WIN!")},50)}createRandomColors(){let e=[];for(let t=0;t<i(this,u)*i(this,p)/2;t++){let o=Math.floor(Math.random()*256),r=Math.floor(Math.random()*256),l=Math.floor(Math.random()*256),I=`rgb(${o}, ${r}, ${l})`;e.push(I)}return e=[...e,...e],L(e),e}createBoxes(){if(a(this,c,[]),localStorage.getItem("boxes")!==null)JSON.parse(localStorage.getItem("boxes")).map(t=>{let o=new T(t.row,t.col,t.color,t.free,t.open);i(this,c).push(o)});else{let e=this.createRandomColors();for(let t=0;t<i(this,p);t++)for(let o=0;o<i(this,u);o++){let r=e.shift(),l=new T(t,o,r);i(this,c).push(l)}this.arrayBoxesToLocalStorage()}}arrayBoxesToLocalStorage(){let e=i(this,c).map(t=>({row:t.row,col:t.col,color:t.color,free:t.free,open:t.open}));localStorage.setItem("boxes",JSON.stringify(e))}paintBoxes(){let e=document.createElement("header");e.setAttribute("id","boxHeader"),this.element.appendChild(e);let t=document.createElement("div");t.setAttribute("id","boxContainer"),this.element.appendChild(t),this.setCSSBoxTemplates(),i(this,c).map(o=>{let r=document.createElement("div");r.classList.add("box"),(!o.free||o.open)&&(r.style.backgroundColor=o.color),o.element=r,o.addEventClick(),t.appendChild(r)})}initTimer(){let e=document.createElement("h2");e.setAttribute("id","timerContainer"),e.innerHTML='<span id="timer">00:00:00</span>',document.getElementById("boxHeader").appendChild(e),this.timer=new O,this.timer.start()}setCSSBoxTemplates(){let e=document.getElementById("boxContainer");e.style.gridTemplateColumns=`repeat(${this.cols}, 1fr)`,e.style.gridTemplateRows=`repeat(${this.rows}, 1fr)`}static getRowsCols(){let e,t;if(localStorage.getItem("rows")!==null&&localStorage.getItem("cols")!==null)e=parseInt(localStorage.getItem("rows")),t=parseInt(localStorage.getItem("cols"));else{for(e=parseInt(prompt("Enter the number of rows")),t=parseInt(prompt("Enter the number of columns"));e*t%2!==0;)alert("The number of cards must be even. Please re-enter the data."),e=parseInt(prompt("Enter the number of rows")),t=parseInt(prompt("Enter the number of columns"));localStorage.setItem("rows",e),localStorage.setItem("cols",t)}return{rows:e,cols:t}}static resetGame(){localStorage.removeItem("cols"),localStorage.removeItem("rows"),localStorage.removeItem("boxes"),localStorage.removeItem("timer"),localStorage.removeItem("finalTime"),location.reload()}}p=new WeakMap,u=new WeakMap,C=new WeakMap,c=new WeakMap;document.getElementById("reset").addEventListener("click",()=>{y.resetGame()});let E=y.getRowsCols();new y(E.rows,E.cols,"game");
